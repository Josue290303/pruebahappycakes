<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <title>Happy Cakes â€¢ Tortas Artesanales</title>
  <link rel="icon" href="imagenes/logohappycake.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@400;500;600&display=swap');
    body { font-family: 'Inter', system-ui, sans-serif; background: #fffaf5; touch-action: manipulation; }
    .heading { font-family: 'Playfair Display', serif; }
    .opciones { max-height: 0; overflow: hidden; transition: max-height 0.5s ease; }
    .opciones.open { max-height: 680px; overflow-y: auto; }
    .opcion-btn {
      padding: 9px 16px; font-size: 13px; border: 2px solid #fecaca; color: #c40000;
      border-radius: 9999px; min-width: 92px;
    }
    .opcion-btn.activo { background: #c40000; color: white; border-color: #c40000; }
    .tajada-btn {
      width: 42px; height: 42px; font-size: 15px; border: 2px solid #fecaca;
      color: #c40000; border-radius: 9999px;
    }
    .tajada-btn.activo { background: #c40000; color: white; border-color: #c40000; }
    .tajadas { max-height: 0; overflow: hidden; transition: max-height 0.4s ease; margin-top: 16px; }
    .tajadas.open { max-height: 260px; }
    input, textarea, select { font-size: 16px !important; }
    .btn-enviar { transition: all 0.2s; }
    .btn-enviar:active { transform: scale(0.96); }
  </style>
</head>
<body>

<!-- HERO -->
<div id="inicio" class="min-h-[100dvh] bg-gradient-to-br from-rose-600 to-rose-700 flex items-center justify-center px-4">
  <div class="text-center max-w-md mx-auto">
    <img src="imagenes/logohappycake.png" class="w-32 sm:w-40 h-32 sm:h-40 mx-auto mb-8 rounded-full border-8 border-white shadow-2xl">
    <h1 class="heading text-5xl sm:text-7xl text-white font-bold tracking-tighter">Happy Cakes</h1>
    <p class="text-white/90 text-xl sm:text-2xl mt-4">Tortas con amor desde Tarapoto</p>
    <button onclick="entrar()" class="mt-12 bg-white text-rose-600 px-10 sm:px-16 py-5 sm:py-6 rounded-3xl text-xl sm:text-2xl font-bold hover:scale-105 transition">
      Ingresar al CatÃ¡logo
    </button>
  </div>
</div>

<div id="contenido" class="hidden pt-10 sm:pt-12 pb-32">

  <!-- CATÃLOGOS -->
  <div class="max-w-6xl mx-auto px-4 sm:px-6 mb-12 sm:mb-16">
    <div class="grid sm:grid-cols-2 gap-6">
      <button onclick="abrirCatalogo('sanvalentin')" class="bg-gradient-to-br from-pink-100 to-rose-100 hover:from-pink-200 hover:to-rose-200 rounded-3xl p-8 sm:p-10 text-left transition-all">
        <p class="text-rose-600 font-medium">San ValentÃ­n 2026</p>
        <h3 class="heading text-3xl sm:text-4xl font-bold mt-2">CatÃ¡logo Especial</h3>
      </button>
      <button onclick="abrirCatalogo('bocaditos')" class="bg-gradient-to-br from-amber-100 to-orange-100 hover:from-amber-200 hover:to-orange-200 rounded-3xl p-8 sm:p-10 text-left transition-all">
        <p class="text-orange-600 font-medium">Para compartir</p>
        <h3 class="heading text-3xl sm:text-4xl font-bold mt-2">Bocaditos Premium</h3>
      </button>
    </div>
  </div>

  <!-- TORTAS -->
  <div class="max-w-6xl mx-auto px-4 sm:px-6">
    <div id="lista" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-10"></div>
  </div>

  <!-- FOOTER -->
  <footer class="mt-16 sm:mt-20 bg-gray-900 text-white py-10 sm:py-12">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 text-center">
      <p class="text-xl sm:text-2xl heading">Happy Cakes</p>
      <p class="text-gray-400 mt-2 text-sm sm:text-base">Entregas a domicilio en Tarapoto â€¢ Pedidos por WhatsApp</p>
      <div class="flex justify-center gap-6 sm:gap-8 my-6 sm:my-8">
        <a href="#" class="text-2xl sm:text-3xl hover:text-rose-400"><i class="fa-brands fa-instagram"></i></a>
        <a href="#" class="text-2xl sm:text-3xl hover:text-rose-400"><i class="fa-brands fa-facebook"></i></a>
        <a href="https://wa.me/51958049586" class="text-2xl sm:text-3xl hover:text-rose-400"><i class="fa-brands fa-whatsapp"></i></a>
      </div>
      <p class="text-xs sm:text-sm text-gray-500">Â© 2026 Happy Cakes Â· Desarrollo y diseÃ±o por JosuÃ© Lopez Â· @blazemodejj</p>
    </div>
  </footer>

  <!-- BotÃ³n fijo -->
  <div class="fixed bottom-0 left-0 right-0 bg-white border-t shadow-2xl z-50 py-4 sm:py-5 px-4 sm:px-6">
    <button onclick="mostrarCarrito()" class="w-full bg-rose-600 hover:bg-rose-700 text-white font-bold text-lg sm:text-xl py-5 sm:py-6 rounded-3xl flex items-center justify-center gap-3 transition">
      <i class="fa-solid fa-bag-shopping"></i>
      Enviar Pedido por WhatsApp (<span id="bottom-count" class="font-bold">0</span>)
    </button>
  </div>
</div>

<!-- MODAL CATÃLOGO -->
<div id="catalogo-modal" class="fixed inset-0 bg-black/90 hidden flex items-center justify-center z-[110] p-4">
  <div class="bg-white rounded-3xl w-full max-w-5xl max-h-[96vh] overflow-hidden flex flex-col shadow-2xl">
    <div class="p-5 sm:p-6 border-b flex justify-between items-center">
      <h2 id="modal-title" class="heading text-2xl sm:text-3xl font-bold text-rose-600"></h2>
      <button onclick="cerrarCatalogo()" class="text-4xl text-gray-400 hover:text-gray-600">Ã—</button>
    </div>
    <div class="flex-1 bg-gray-100 overflow-hidden">
      <iframe id="catalogo-iframe" frameborder="0" allowfullscreen></iframe>
    </div>
    <div class="p-5 sm:p-6 border-t bg-gray-50 text-center">
      <p class="text-gray-700 font-medium mb-4">Â¿Deseas pedir algo de este catÃ¡logo?</p>
      <button onclick="pedirDesdeCatalogo()" class="bg-green-500 hover:bg-green-600 text-white px-10 py-5 rounded-3xl font-bold text-lg flex items-center gap-3 mx-auto">
        <i class="fa-brands fa-whatsapp text-2xl"></i>
        Consultar por WhatsApp
      </button>
    </div>
  </div>
</div>

<!-- PANEL TU PEDIDO -->
<div id="cart-panel" class="fixed inset-0 bg-black/70 hidden flex items-center justify-center z-[100] px-4">
  <div class="bg-white rounded-3xl w-full max-w-lg max-h-[90vh] overflow-hidden">
    <div class="p-5 sm:p-6 border-b flex justify-between items-center">
      <h2 class="heading text-2xl sm:text-3xl font-bold text-rose-600">Tu Pedido</h2>
      <button onclick="cerrarCarrito()" class="text-4xl text-gray-400 hover:text-gray-600">Ã—</button>
    </div>
    <div id="cart-items" class="p-5 sm:p-6 max-h-[45vh] overflow-y-auto space-y-5"></div>
    
    <div class="p-5 sm:p-6 border-t bg-gray-50 space-y-4">
      <div class="grid grid-cols-2 gap-4">
        <input type="date" id="fecha" class="border border-gray-300 rounded-2xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-rose-500">
        <input type="time" id="hora" class="border border-gray-300 rounded-2xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-rose-500">
      </div>
      <input type="text" id="cliente" placeholder="Nombre del cliente" class="w-full border border-gray-300 rounded-2xl px-5 py-4 focus:outline-none focus:ring-2 focus:ring-rose-500">
      <input type="text" id="mensaje" placeholder="Dedicatoria / Mensaje en la torta" class="w-full border border-gray-300 rounded-2xl px-5 py-4 focus:outline-none focus:ring-2 focus:ring-rose-500">
    </div>
    
    <div class="p-6 border-t bg-white">
      <button onclick="enviarPedido()" class="btn-enviar w-full bg-rose-600 hover:bg-rose-700 active:bg-rose-800 text-white py-7 rounded-3xl font-bold text-xl flex items-center justify-center gap-3 shadow-xl">
        <i class="fa-brands fa-whatsapp text-3xl"></i>
        Enviar Pedido por WhatsApp
      </button>
    </div>
  </div>
</div>

<script>
// ==================== VARIABLES ====================
let carrito = [];
let currentCatalog = '';

// ==================== FUNCIONES ====================
function entrar() {
  document.getElementById("inicio").classList.add("hidden");
  document.getElementById("contenido").classList.remove("hidden");
}

function abrirCatalogo(tipo) {
  let basePdf = tipo === "sanvalentin" 
    ? "pdf/Documento A4 CatÃ¡logo de San ValentÃ­n Moderno Rosa_20260206_192547_0000.pdf"
    : "pdf/CatÃ¡logo de bocaditos_20260224_123456_0000.pdf";
  let pdfUrl = basePdf + "#toolbar=0&navpanes=0&scrollbar=0&view=FitH";
  let titulo = tipo === "sanvalentin" ? "CatÃ¡logo San ValentÃ­n 2026" : "CatÃ¡logo Bocaditos Premium";
  document.getElementById('modal-title').textContent = titulo;
  document.getElementById('catalogo-iframe').src = pdfUrl;
  document.getElementById('catalogo-modal').classList.remove('hidden');
  currentCatalog = titulo;
}

function cerrarCatalogo() {
  document.getElementById('catalogo-modal').classList.add('hidden');
  document.getElementById('catalogo-iframe').src = '';
}

function pedirDesdeCatalogo() {
  const mensaje = `Hola Happy Cakes! ðŸŒ¸ Vi el *${currentCatalog}* y me gustarÃ­a hacer un pedido. Â¿Me puedes ayudar?`;
  window.open(`https://wa.me/51958049586?text=${encodeURIComponent(mensaje)}`, "_blank");
  cerrarCatalogo();
}

// ==================== TORTAS COMPLETAS ====================
const tortas = [
  {nombre:"Torta Chocolate", precioCompleta:60, precioTajada:8, img:"imagenes/chocolate.jpg"},
  {nombre:"Torta Tres Leches", precioCompleta:55, precioTajada:7, img:"imagenes/tresleches.jpg"},
  {nombre:"Torta Red Velvet", precioCompleta:65, precioTajada:9, img:"imagenes/redvelvet.jpg"},
  {nombre:"Torta Oreo", precioCompleta:70, precioTajada:10, img:"imagenes/oreo.jpg"},
  {nombre:"Torta Fresa", precioCompleta:58, precioTajada:8, img:"imagenes/fresa.jpg"}
];

const lista = document.getElementById("lista");

tortas.forEach(t => {
  lista.innerHTML += `
  <div class="bg-white rounded-3xl overflow-hidden shadow-xl torta-card">
    <img src="${t.img}" class="w-full h-64 object-cover">
    <div class="p-5 sm:p-8">
      <h3 class="heading text-3xl sm:text-4xl font-bold text-gray-800 text-center">${t.nombre}</h3>
      <p class="text-gray-600 mt-1 text-sm sm:text-base text-center">Completa S/${t.precioCompleta} â€¢ Tajada S/${t.precioTajada}</p>
      
      <button onclick="toggle(this)" class="mt-6 w-full bg-rose-50 hover:bg-rose-100 text-rose-700 py-4 rounded-3xl font-bold text-lg flex items-center justify-center gap-3">
        <span class="text-3xl leading-none">+</span> Personalizar
      </button>
      
      <div class="opciones mt-5 bg-gray-50 rounded-3xl p-5">
        <!-- PresentaciÃ³n -->
        <div class="mb-6">
          <p class="text-rose-600 font-bold mb-3 text-center">PresentaciÃ³n</p>
          <div class="flex flex-wrap gap-2 justify-center">
            <button onclick="seleccionar(event,this)" class="opcion-btn">Torta Completa</button>
            <button onclick="seleccionar(event,this)" class="opcion-btn">Por Tajadas</button>
          </div>
          <div class="tajadas mt-5">
            <div class="grid grid-cols-5 gap-2 justify-center">
              <button onclick="seleccionarTajada(event,this)" class="tajada-btn">1</button>
              <button onclick="seleccionarTajada(event,this)" class="tajada-btn">2</button>
              <button onclick="seleccionarTajada(event,this)" class="tajada-btn">3</button>
              <button onclick="seleccionarTajada(event,this)" class="tajada-btn">4</button>
              <button onclick="seleccionarTajada(event,this)" class="tajada-btn">5</button>
            </div>
            <div class="mt-5 flex gap-2 justify-center">
              <input type="number" min="6" placeholder="Cantidad" class="w-24 border border-rose-200 rounded-3xl px-4 py-3 text-center">
              <button onclick="agregarTajadaPersonalizada('${t.nombre}', this)" class="opcion-btn px-5 py-3 text-xs">Agregar</button>
            </div>
          </div>
        </div>
        <!-- Relleno -->
        <div class="mb-6">
          <p class="text-rose-600 font-bold mb-3 text-center">Relleno</p>
          <div class="flex flex-wrap gap-2 justify-center">
            <button onclick="seleccionar(event,this)" class="opcion-btn">Fresa</button>
            <button onclick="seleccionar(event,this)" class="opcion-btn">Manjar</button>
            <button onclick="seleccionar(event,this)" class="opcion-btn">Chocolate</button>
          </div>
        </div>
        <!-- Cobertura -->
        <div class="mb-6">
          <p class="text-rose-600 font-bold mb-3 text-center">Cobertura</p>
          <div class="flex flex-wrap gap-2 justify-center">
            <button onclick="seleccionar(event,this)" class="opcion-btn">Chantilly</button>
            <button onclick="seleccionar(event,this)" class="opcion-btn">Fondant</button>
            <button onclick="seleccionar(event,this)" class="opcion-btn">Ganache</button>
          </div>
        </div>
        <!-- Toppings -->
        <div class="mb-6">
          <p class="text-rose-600 font-bold mb-3 text-center">Toppings</p>
          <div class="flex flex-wrap gap-2 justify-center">
            <button onclick="toggleTopping(event,this)" class="opcion-btn">Fresas</button>
            <button onclick="toggleTopping(event,this)" class="opcion-btn">Oreo</button>
            <button onclick="toggleTopping(event,this)" class="opcion-btn">Chispas</button>
            <button onclick="toggleTopping(event,this)" class="opcion-btn">Nueces</button>
          </div>
        </div>
        <button onclick="agregarAlCarrito('${t.nombre}', this)" class="mt-8 w-full bg-rose-600 hover:bg-rose-700 text-white py-4 rounded-3xl font-bold text-lg">
          Agregar al Pedido
        </button>
      </div>
    </div>
  </div>`;
});

// ==================== FUNCIONES ====================
function toggle(btn) {
  const card = btn.closest('.torta-card');
  const opciones = card.querySelector('.opciones');
  document.querySelectorAll('.opciones').forEach(o => o.classList.remove('open'));
  if (!opciones.classList.contains('open')) opciones.classList.add('open');
}

function seleccionar(e, btn) {
  e.stopPropagation();
  const grupo = btn.parentElement.parentElement;
  grupo.querySelectorAll('.opcion-btn').forEach(b => b.classList.remove('activo'));
  btn.classList.add('activo');
  const tajadas = grupo.querySelector('.tajadas');
  if (tajadas) tajadas.classList.toggle('open', btn.textContent.includes('Por Tajadas'));
}

function seleccionarTajada(e, btn) {
  e.stopPropagation();
  const grupo = btn.parentElement;
  grupo.querySelectorAll('.tajada-btn').forEach(b => b.classList.remove('activo'));
  btn.classList.add('activo');
}

function agregarTajadaPersonalizada(nombre, btn) {
  const input = btn.parentElement.querySelector('input');
  const cantidad = input.value.trim();
  if (!cantidad || parseInt(cantidad) < 6) {
    alert("Ingresa una cantidad mayor a 5");
    return;
  }
  alert(`Se agregaron ${cantidad} tajadas de ${nombre}`);
  input.value = '';
}

function toggleTopping(e, btn) {
  e.stopPropagation();
  btn.classList.toggle('activo');
}

function agregarAlCarrito(nombre, btn) {
  const card = btn.closest('.torta-card');
  let item = { nombre, presentacion:"", cantidad:"", relleno:"", cobertura:"", toppings:[] };

  const grupos = card.querySelectorAll('.opciones > div');
  const pres = grupos[0].querySelector('.opcion-btn.activo');
  if (pres) item.presentacion = pres.textContent;
  const taj = grupos[0].querySelector('.tajadas .tajada-btn.activo');
  if (taj) item.cantidad = taj.textContent;
  const rel = grupos[1].querySelector('.opcion-btn.activo');
  if (rel) item.relleno = rel.textContent;
  const cob = grupos[2].querySelector('.opcion-btn.activo');
  if (cob) item.cobertura = cob.textContent;
  grupos[3].querySelectorAll('.opcion-btn.activo').forEach(t => item.toppings.push(t.textContent));

  carrito.push(item);
  card.querySelector('.opciones').classList.remove('open');
  actualizarContador();
  showToast(`${nombre} agregada al pedido`);
}

function showToast(msg) {
  const t = document.createElement('div');
  t.className = 'fixed top-6 right-6 bg-rose-600 text-white px-8 py-4 rounded-3xl shadow-2xl flex items-center gap-3 z-[200]';
  t.innerHTML = `<i class="fa-solid fa-check-circle text-2xl"></i><span class="font-medium">${msg}</span>`;
  document.body.appendChild(t);
  setTimeout(() => t.remove(), 3000);
}

function actualizarContador() {
  document.getElementById('bottom-count').textContent = carrito.length;
}

function mostrarCarrito() {
  const container = document.getElementById('cart-items');
  container.innerHTML = '';
  if (carrito.length === 0) {
    container.innerHTML = '<p class="text-center text-gray-500 py-12">No hay productos aÃºn</p>';
  } else {
    carrito.forEach((item, i) => {
      const div = document.createElement('div');
      div.className = "flex justify-between border-b pb-6 last:border-0";
      div.innerHTML = `
        <div>
          <p class="font-bold">${item.nombre}</p>
          <p class="text-sm text-gray-600">${item.presentacion} ${item.cantidad ? `(${item.cantidad} tajadas)` : ''} ${item.relleno ? 'â€¢ '+item.relleno : ''} ${item.cobertura ? 'â€¢ '+item.cobertura : ''}</p>
          ${item.toppings.length ? `<p class="text-sm text-gray-500">Toppings: ${item.toppings.join(', ')}</p>` : ''}
        </div>
        <button onclick="carrito.splice(${i},1); actualizarContador(); mostrarCarrito()" class="text-red-500">
          <i class="fa-solid fa-trash"></i>
        </button>`;
      container.appendChild(div);
    });
  }
  document.getElementById('cart-panel').classList.remove('hidden');
}

function cerrarCarrito() {
  document.getElementById('cart-panel').classList.add('hidden');
}

function enviarPedido() {
  if (carrito.length === 0) return alert("No hay productos");

  const fecha = document.getElementById('fecha').value || '';
  const hora = document.getElementById('hora').value || '';
  const cliente = document.getElementById('cliente').value.trim();
  const dedicatoria = document.getElementById('mensaje').value.trim();

  let msg = "PEDIDO HAPPY CAKES\n\n";
  if (cliente) msg += `Cliente: ${cliente}\n`;
  if (fecha) msg += `Fecha: ${fecha}\n`;
  if (hora) msg += `Hora: ${hora}\n\n`;
  msg += "PRODUCTOS:\n";
  carrito.forEach((item, i) => {
    msg += `${i+1}. ${item.nombre}\n`;
    if (item.presentacion) msg += `   PresentaciÃ³n: ${item.presentacion}\n`;
    if (item.cantidad) msg += `   Cantidad: ${item.cantidad} tajadas\n`;
    if (item.relleno) msg += `   Relleno: ${item.relleno}\n`;
    if (item.cobertura) msg += `   Cobertura: ${item.cobertura}\n`;
    if (item.toppings.length) msg += `   Toppings: ${item.toppings.join(", ")}\n`;
    msg += "\n";
  });
  if (dedicatoria) msg += `Dedicatoria: ${dedicatoria}\n`;

  window.open(`https://wa.me/51958049586?text=${encodeURIComponent(msg)}`, "_blank");

  carrito = [];
  actualizarContador();
  cerrarCarrito();
  showToast("Â¡Pedido enviado por WhatsApp!");
}
</script>
</body>
</html>