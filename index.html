<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <title>Happy Cakes • Tortas Artesanales</title>
  <link rel="icon" href="imagenes/logohappycake.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@400;500;600&display=swap');
    
    body { 
      font-family: 'Inter', system-ui, sans-serif; 
      background: #fffaf5; 
      touch-action: manipulation;
      overscroll-behavior: none;
    }
    .heading { font-family: 'Playfair Display', serif; }
    .opciones { max-height: 0; overflow: hidden; transition: max-height 0.6s ease; }
    .opciones.open { max-height: 1600px; }
    
    .opcion-btn {
      transition: all 0.25s;
      border: 2px solid #fecaca;
      color: #c40000;
      padding: 10px 18px;
      font-size: 14px;
      font-weight: 500;
      border-radius: 9999px;
      min-width: 95px;
    }
    .opcion-btn.activo {
      background: #c40000;
      color: white;
      border-color: #c40000;
    }
    
    .tajada-btn {
      width: 48px;
      height: 48px;
      border-radius: 9999px;
      font-size: 16px;
      font-weight: 600;
      border: 2px solid #fecaca;
      color: #c40000;
    }
    .tajada-btn.activo {
      background: #c40000;
      color: white;
      border-color: #c40000;
    }
    
    .tajadas { 
      max-height: 0; 
      overflow: hidden; 
      transition: max-height 0.4s ease; 
      margin-top: 20px;
    }
    .tajadas.open { max-height: 320px; }

    input, textarea, select {
      font-size: 16px !important;
      line-height: 1.5;
    }

    input:focus, textarea:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgba(244, 63, 94, 0.3);
    }

    .hero-min-height {
      min-height: 100dvh;
    }
  </style>
</head>
<body>

<!-- HERO -->
<div id="inicio" class="hero-min-height bg-gradient-to-br from-rose-600 to-rose-700 flex items-center justify-center px-4">
  <div class="text-center">
    <img src="imagenes/logohappycake.png" class="w-32 sm:w-40 h-32 sm:h-40 mx-auto mb-8 rounded-full border-8 border-white shadow-2xl">
    <h1 class="heading text-5xl sm:text-7xl text-white font-bold tracking-tighter">Happy Cakes</h1>
    <p class="text-white/90 text-xl sm:text-2xl mt-4">Tortas con amor desde Tarapoto</p>
    <button onclick="entrar()" class="mt-12 bg-white text-rose-600 px-10 sm:px-16 py-5 sm:py-6 rounded-3xl text-xl sm:text-2xl font-bold hover:scale-105 transition">
      Ingresar al Catálogo
    </button>
  </div>
</div>

<div id="contenido" class="hidden pt-10 sm:pt-12 pb-32">

  <!-- CATÁLOGOS ARRIBA -->
  <div class="max-w-6xl mx-auto px-4 sm:px-6 mb-12 sm:mb-16">
    <div class="grid sm:grid-cols-2 gap-6">
      <button onclick="abrirCatalogo('sanvalentin')" class="bg-gradient-to-br from-pink-100 to-rose-100 hover:from-pink-200 hover:to-rose-200 rounded-3xl p-8 sm:p-10 text-left transition-all">
        <p class="text-rose-600 font-medium">San Valentín 2026</p>
        <h3 class="heading text-3xl sm:text-4xl font-bold mt-2">Catálogo Especial</h3>
      </button>
      <button onclick="abrirCatalogo('bocaditos')" class="bg-gradient-to-br from-amber-100 to-orange-100 hover:from-amber-200 hover:to-orange-200 rounded-3xl p-8 sm:p-10 text-left transition-all">
        <p class="text-orange-600 font-medium">Para compartir</p>
        <h3 class="heading text-3xl sm:text-4xl font-bold mt-2">Bocaditos Premium</h3>
      </button>
    </div>
  </div>

  <!-- TORTAS -->
  <div class="max-w-6xl mx-auto px-4 sm:px-6">
    <div id="lista" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-10"></div>
  </div>

  <!-- FOOTER -->
  <footer class="mt-16 sm:mt-20 bg-gray-900 text-white py-10 sm:py-12">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 text-center">
      <p class="text-xl sm:text-2xl heading">Happy Cakes</p>
      <p class="text-gray-400 mt-2 text-sm sm:text-base">Entregas a domicilio en Tarapoto • Pedidos por WhatsApp</p>
      <div class="flex justify-center gap-6 sm:gap-8 my-6 sm:my-8">
        <a href="#" class="text-2xl sm:text-3xl hover:text-rose-400"><i class="fa-brands fa-instagram"></i></a>
        <a href="#" class="text-2xl sm:text-3xl hover:text-rose-400"><i class="fa-brands fa-facebook"></i></a>
        <a href="https://wa.me/51958049586" class="text-2xl sm:text-3xl hover:text-rose-400"><i class="fa-brands fa-whatsapp"></i></a>
      </div>
      <p class="text-xs sm:text-sm text-gray-500">© 2026 Happy Cakes · Desarrollo y diseño por Josué Lopez · @blazemodejj</p>
    </div>
  </footer>

  <!-- Botón fijo abajo -->
  <div class="fixed bottom-0 left-0 right-0 bg-white border-t shadow-2xl z-50 py-4 sm:py-5 px-4 sm:px-6">
    <button onclick="mostrarCarrito()" 
            class="w-full bg-rose-600 hover:bg-rose-700 text-white font-bold text-lg sm:text-xl py-5 sm:py-6 rounded-3xl flex items-center justify-center gap-3 transition">
      <i class="fa-solid fa-bag-shopping"></i>
      Enviar Pedido por WhatsApp (<span id="bottom-count" class="font-bold">0</span>)
    </button>
  </div>
</div>

<!-- Panel de pedido -->
<div id="cart-panel" class="fixed inset-0 bg-black/70 hidden flex items-center justify-center z-[100] px-4">
  <div class="bg-white rounded-3xl w-full max-w-lg max-h-[90vh] overflow-hidden">
    <div class="p-5 sm:p-6 border-b flex justify-between items-center">
      <h2 class="heading text-2xl sm:text-3xl font-bold text-rose-600">Tu Pedido</h2>
      <button onclick="cerrarCarrito()" class="text-3xl sm:text-4xl text-gray-400 hover:text-gray-600">×</button>
    </div>
    <div id="cart-items" class="p-5 sm:p-6 max-h-[50vh] sm:max-h-[55vh] overflow-y-auto space-y-5 sm:space-y-6"></div>
    <div class="p-5 sm:p-6 border-t bg-gray-50">
      <div class="grid grid-cols-2 gap-4 mb-5 sm:mb-6">
        <input type="date" id="fecha" class="border border-gray-300 rounded-2xl px-4 py-3 sm:px-5 sm:py-4 focus:outline-none focus:ring-2 focus:ring-rose-500">
        <input type="time" id="hora" class="border border-gray-300 rounded-2xl px-4 py-3 sm:px-5 sm:py-4 focus:outline-none focus:ring-2 focus:ring-rose-500">
      </div>
      <input type="text" id="cliente" placeholder="Nombre del cliente" class="w-full border border-gray-300 rounded-2xl px-4 sm:px-5 py-3 sm:py-4 mb-4 focus:outline-none focus:ring-2 focus:ring-rose-500">
      <input type="text" id="mensaje" placeholder="Dedicatoria / Mensaje en la torta" class="w-full border border-gray-300 rounded-2xl px-4 sm:px-5 py-3 sm:py-4 focus:outline-none focus:ring-2 focus:ring-rose-500">
    </div>
    <div class="p-5 sm:p-6">
      <button onclick="enviarPedido()" class="w-full bg-rose-600 hover:bg-rose-700 text-white py-5 sm:py-6 rounded-3xl font-bold text-lg sm:text-xl transition">
        Enviar Pedido por WhatsApp
      </button>
    </div>
  </div>
</div>

<script>
// ==================== INICIO ====================
function entrar() {
  document.getElementById("inicio").classList.add("hidden");
  document.getElementById("contenido").classList.remove("hidden");
}

function abrirCatalogo(tipo) {
  let pdf = tipo === "sanvalentin" 
    ? "pdf/Documento A4 Catálogo de San Valentín Moderno Rosa_20260206_192547_0000.pdf"
    : "pdf/Catálogo de bocaditos_20260224_123456_0000.pdf";
  window.open(pdf, "_blank");
}

// ==================== TORTAS ====================
const tortas = [
  {nombre:"Torta Chocolate", precioCompleta:60, precioTajada:8, img:"imagenes/chocolate.jpg"},
  {nombre:"Torta Tres Leches", precioCompleta:55, precioTajada:7, img:"imagenes/tresleches.jpg"},
  {nombre:"Torta Red Velvet", precioCompleta:65, precioTajada:9, img:"imagenes/redvelvet.jpg"},
  {nombre:"Torta Oreo", precioCompleta:70, precioTajada:10, img:"imagenes/oreo.jpg"},
  {nombre:"Torta Fresa", precioCompleta:58, precioTajada:8, img:"imagenes/fresa.jpg"}
];

const lista = document.getElementById("lista");
let carrito = [];

tortas.forEach(t => {
  lista.innerHTML += `
  <div class="bg-white rounded-3xl overflow-hidden shadow-xl torta-card">
    <img src="${t.img}" class="w-full h-64 object-cover">
    <div class="p-6 sm:p-8">
      <h3 class="heading text-3xl sm:text-4xl font-bold text-gray-800">${t.nombre}</h3>
      <p class="text-gray-600 mt-1 text-sm sm:text-base">Completa S/${t.precioCompleta} • Tajada S/${t.precioTajada}</p>
      
      <button onclick="toggle(this)" class="mt-6 sm:mt-8 w-full bg-rose-50 hover:bg-rose-100 text-rose-700 py-5 sm:py-6 rounded-3xl font-bold text-lg sm:text-xl flex items-center justify-center gap-3">
        <span class="text-3xl sm:text-4xl leading-none">+</span> Personalizar
      </button>
      
      <div class="opciones mt-6 bg-gray-50 rounded-3xl p-6 sm:p-8">
        <!-- Presentación -->
        <div class="mb-8 sm:mb-10">
          <p class="text-rose-600 font-bold mb-4 text-base sm:text-lg">Presentación</p>
          <div class="grid grid-cols-2 gap-3 sm:gap-4">
            <button onclick="seleccionar(event,this)" class="opcion-btn">Torta Completa</button>
            <button onclick="seleccionar(event,this)" class="opcion-btn">Por Tajadas</button>
          </div>
          
          <div class="tajadas mt-6">
            <div class="grid grid-cols-5 gap-3 sm:gap-4">
              <button onclick="seleccionarTajada(event,this)" class="tajada-btn">1</button>
              <button onclick="seleccionarTajada(event,this)" class="tajada-btn">2</button>
              <button onclick="seleccionarTajada(event,this)" class="tajada-btn">3</button>
              <button onclick="seleccionarTajada(event,this)" class="tajada-btn">4</button>
              <button onclick="seleccionarTajada(event,this)" class="tajada-btn">5</button>
            </div>
            
            <div class="mt-6 flex items-center gap-3">
              <input type="number" min="6" placeholder="Cantidad" 
                     class="w-28 border border-rose-200 rounded-3xl px-4 sm:px-5 py-3 text-center focus:outline-none focus:border-rose-500">
              <button onclick="agregarTajadaPersonalizada('${t.nombre}', this)" 
                      class="opcion-btn px-6 sm:px-8 py-3 text-sm font-medium">Agregar</button>
            </div>
          </div>
        </div>

        <!-- Relleno -->
        <div class="mb-8 sm:mb-10">
          <p class="text-rose-600 font-bold mb-4 text-base sm:text-lg">Relleno</p>
          <div class="flex flex-wrap gap-3">
            <button onclick="seleccionar(event,this)" class="opcion-btn">Fresa</button>
            <button onclick="seleccionar(event,this)" class="opcion-btn">Manjar</button>
            <button onclick="seleccionar(event,this)" class="opcion-btn">Chocolate</button>
          </div>
        </div>

        <!-- Cobertura -->
        <div class="mb-8 sm:mb-10">
          <p class="text-rose-600 font-bold mb-4 text-base sm:text-lg">Cobertura</p>
          <div class="flex flex-wrap gap-3">
            <button onclick="seleccionar(event,this)" class="opcion-btn">Chantilly</button>
            <button onclick="seleccionar(event,this)" class="opcion-btn">Fondant</button>
            <button onclick="seleccionar(event,this)" class="opcion-btn">Ganache</button>
          </div>
        </div>

        <!-- Toppings -->
        <div>
          <p class="text-rose-600 font-bold mb-4 text-base sm:text-lg">Toppings</p>
          <div class="flex flex-wrap gap-3">
            <button onclick="toggleTopping(event,this)" class="opcion-btn">Fresas</button>
            <button onclick="toggleTopping(event,this)" class="opcion-btn">Oreo</button>
            <button onclick="toggleTopping(event,this)" class="opcion-btn">Chispas</button>
            <button onclick="toggleTopping(event,this)" class="opcion-btn">Nueces</button>
          </div>
        </div>

        <button onclick="agregarAlCarrito('${t.nombre}', this)" class="mt-10 sm:mt-12 w-full bg-rose-600 hover:bg-rose-700 text-white py-5 sm:py-6 rounded-3xl font-bold text-lg sm:text-xl">
          Agregar al Pedido
        </button>
      </div>
    </div>
  </div>`;
});

// ==================== FUNCIONES ====================
function toggle(btn) {
  const card = btn.closest('.torta-card');
  const opciones = card.querySelector('.opciones');
  document.querySelectorAll('.opciones').forEach(o => o.classList.remove('open'));
  if (!opciones.classList.contains('open')) opciones.classList.add('open');
}

function seleccionar(e, btn) {
  e.stopPropagation();
  const grupo = btn.parentElement.parentElement;
  grupo.querySelectorAll('.opcion-btn').forEach(b => b.classList.remove('activo'));
  btn.classList.add('activo');

  const tajadas = grupo.querySelector('.tajadas');
  if (tajadas) tajadas.classList.toggle('open', btn.textContent.includes('Por Tajadas'));
}

function seleccionarTajada(e, btn) {
  e.stopPropagation();
  const grupo = btn.parentElement;
  grupo.querySelectorAll('.tajada-btn').forEach(b => b.classList.remove('activo'));
  btn.classList.add('activo');
}

function agregarTajadaPersonalizada(nombre, btn) {
  const input = btn.parentElement.querySelector('input');
  const cantidad = input.value.trim();
  if (!cantidad || parseInt(cantidad) < 6) {
    alert("Ingresa una cantidad mayor a 5");
    return;
  }
  alert(`Se agregaron ${cantidad} tajadas de ${nombre}`);
  input.value = '';
}

function toggleTopping(e, btn) {
  e.stopPropagation();
  btn.classList.toggle('activo');
}

function agregarAlCarrito(nombre, btn) {
  const card = btn.closest('.torta-card');
  let item = { nombre, presentacion:"", cantidad:"", relleno:"", cobertura:"", toppings:[] };

  const grupos = card.querySelectorAll('.opciones > div');
  const pres = grupos[0].querySelector('.opcion-btn.activo');
  if (pres) item.presentacion = pres.textContent;

  const taj = grupos[0].querySelector('.tajadas .tajada-btn.activo');
  if (taj) item.cantidad = taj.textContent;

  const rel = grupos[1].querySelector('.opcion-btn.activo');
  if (rel) item.relleno = rel.textContent;

  const cob = grupos[2].querySelector('.opcion-btn.activo');
  if (cob) item.cobertura = cob.textContent;

  grupos[3].querySelectorAll('.opcion-btn.activo').forEach(t => item.toppings.push(t.textContent));

  carrito.push(item);
  card.querySelector('.opciones').classList.remove('open');
  actualizarContador();
  showToast(`${nombre} agregada al pedido`);
}

function showToast(msg) {
  const t = document.createElement('div');
  t.className = 'fixed top-6 right-6 bg-rose-600 text-white px-8 py-4 rounded-3xl shadow-2xl flex items-center gap-3 z-[200]';
  t.innerHTML = `<i class="fa-solid fa-check-circle text-2xl"></i><span class="font-medium">${msg}</span>`;
  document.body.appendChild(t);
  setTimeout(() => t.remove(), 3000);
}

function actualizarContador() {
  document.getElementById('bottom-count').textContent = carrito.length;
}

function mostrarCarrito() {
  const container = document.getElementById('cart-items');
  container.innerHTML = '';
  if (carrito.length === 0) {
    container.innerHTML = '<p class="text-center text-gray-500 py-12">No hay productos aún</p>';
  } else {
    carrito.forEach((item, i) => {
      const div = document.createElement('div');
      div.className = "flex justify-between border-b pb-6 last:border-0";
      div.innerHTML = `
        <div>
          <p class="font-bold">${item.nombre}</p>
          <p class="text-sm text-gray-600">${item.presentacion} ${item.cantidad ? `(${item.cantidad} tajadas)` : ''} ${item.relleno ? '• '+item.relleno : ''} ${item.cobertura ? '• '+item.cobertura : ''}</p>
          ${item.toppings.length ? `<p class="text-sm text-gray-500">Toppings: ${item.toppings.join(', ')}</p>` : ''}
        </div>
        <button onclick="carrito.splice(${i},1); actualizarContador(); mostrarCarrito()" class="text-red-500">
          <i class="fa-solid fa-trash"></i>
        </button>
      `;
      container.appendChild(div);
    });
  }
  document.getElementById('cart-panel').classList.remove('hidden');
}

function cerrarCarrito() {
  document.getElementById('cart-panel').classList.add('hidden');
}

function enviarPedido() {
  if (carrito.length === 0) return alert("No hay productos");
  const fecha = document.getElementById('fecha').value;
  const hora = document.getElementById('hora').value;
  const cliente = document.getElementById('cliente').value.trim();
  const dedicatoria = document.getElementById('mensaje').value.trim();

  let msg = "PEDIDO HAPPY CAKES\n\n";
  if (cliente) msg += `Cliente: ${cliente}\n`;
  if (fecha) msg += `Fecha: ${fecha}\n`;
  if (hora) msg += `Hora: ${hora}\n\n`;
  msg += "PRODUCTOS:\n";
  carrito.forEach((item, i) => {
    msg += `${i+1}. ${item.nombre}\n`;
    if (item.presentacion) msg += `   Presentación: ${item.presentacion}\n`;
    if (item.cantidad) msg += `   Cantidad: ${item.cantidad} tajadas\n`;
    if (item.relleno) msg += `   Relleno: ${item.relleno}\n`;
    if (item.cobertura) msg += `   Cobertura: ${item.cobertura}\n`;
    if (item.toppings.length) msg += `   Toppings: ${item.toppings.join(", ")}\n`;
    msg += "\n";
  });
  if (dedicatoria) msg += `Dedicatoria: ${dedicatoria}\n`;

  window.open(`https://wa.me/51958049586?text=${encodeURIComponent(msg)}`, "_blank");
  carrito = [];
  actualizarContador();
  cerrarCarrito();
  showToast("¡Pedido enviado por WhatsApp!");
}
</script>
</body>
</html>